FROM python:3.8-slim

RUN mkdir -p /app
WORKDIR /app

RUN apt-get update 

RUN apt-get install -y \
    python3-openslide \
    libjpeg-dev \
    zlib1g-dev \
    libvips \
    libvips-tools \
    gcc
    


COPY . /app

RUN curl -s https://packagecloud.io/install/repositories/cytomine-uliege/Cytomine-python-client/script.python.sh | bash
RUN pip install --upgrade pip setuptools wheel
RUN pip install --upgrade pip
RUN pip install torch==1.7.0+cpu torchvision==0.8.1+cpu -f https://download.pytorch.org/whl/torch_stable.html
RUN pip install -r requirements_2.txt


ENTRYPOINT ["python","/app/app.py"]
